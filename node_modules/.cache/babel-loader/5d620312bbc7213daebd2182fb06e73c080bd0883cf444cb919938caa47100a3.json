{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{API_BASE_URL}from\"../../constants/config\";import ProductCard from\"../common/ProductCard\";import{AlertCircle,Loader}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductList(_ref){let{searchTerm=\"\",selectedCategories=[],priceRange={min:0,max:Infinity}}=_ref;const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Fetch all products\nuseEffect(()=>{const fetchProducts=async()=>{try{setLoading(true);const response=await axios.get(\"\".concat(API_BASE_URL,\"/products\"));setProducts(response.data);setError(null);}catch(err){console.error(\"Error fetching products:\",err);setError(\"Failed to load products\");}finally{setLoading(false);}};fetchProducts();},[]);// Apply filters\nuseEffect(()=>{let filtered=[...products];// Filter by search term (name, description, category, price)\nif(searchTerm.trim()){const term=searchTerm.toLowerCase();const searchNumber=parseFloat(searchTerm);filtered=filtered.filter(product=>{var _product$description,_product$category_nam;return product.name.toLowerCase().includes(term)||((_product$description=product.description)===null||_product$description===void 0?void 0:_product$description.toLowerCase().includes(term))||((_product$category_nam=product.category_name)===null||_product$category_nam===void 0?void 0:_product$category_nam.toLowerCase().includes(term))||product.price.toString().includes(term)||!isNaN(searchNumber)&&product.price<=searchNumber;}// Show prices up to search number\n);}// Filter by multiple categories\nif(selectedCategories.length>0){filtered=filtered.filter(product=>selectedCategories.includes(product.category_id));}// Filter by price range\nfiltered=filtered.filter(product=>product.price>=priceRange.min&&product.price<=priceRange.max);setFilteredProducts(filtered);},[products,searchTerm,selectedCategories,priceRange]);return/*#__PURE__*/_jsxs(\"section\",{id:\"products\",className:\"w-full\",children:[loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-24\",children:[/*#__PURE__*/_jsx(Loader,{className:\"h-10 w-10 text-blue-600 animate-spin mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Loading amazing products...\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-12 w-12 text-red-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-red-800 font-semibold\",children:error}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600 mt-2\",children:\"Please try refreshing the page\"})]}),!loading&&!error&&filteredProducts.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-24\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600 font-medium\",children:\"No products found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:searchTerm||selectedCategories.length>0||priceRange.max!==Infinity?\"Try adjusting your filters\":\"Check back soon for new items\"})]}),!loading&&!error&&filteredProducts.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6 font-medium\",children:[\"Showing \",filteredProducts.length,\" product\",filteredProducts.length!==1?\"s\":\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product},product.id))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","API_BASE_URL","ProductCard","AlertCircle","Loader","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","searchTerm","selectedCategories","priceRange","min","max","Infinity","products","setProducts","filteredProducts","setFilteredProducts","loading","setLoading","error","setError","fetchProducts","response","get","concat","data","err","console","filtered","trim","term","toLowerCase","searchNumber","parseFloat","filter","product","_product$description","_product$category_nam","name","includes","description","category_name","price","toString","isNaN","length","category_id","id","className","children","map"],"sources":["C:/Users/SR/Downloads/full_project/frontend/src/components/sections/ProductList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { API_BASE_URL } from \"../../constants/config\";\r\nimport ProductCard from \"../common/ProductCard\";\r\nimport { AlertCircle, Loader } from \"lucide-react\";\r\n\r\nexport default function ProductList({\r\n  searchTerm = \"\",\r\n  selectedCategories = [],\r\n  priceRange = { min: 0, max: Infinity },\r\n}) {\r\n  const [products, setProducts] = useState([]);\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch all products\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`${API_BASE_URL}/products`);\r\n        setProducts(response.data);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(\"Error fetching products:\", err);\r\n        setError(\"Failed to load products\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  // Apply filters\r\n  useEffect(() => {\r\n    let filtered = [...products];\r\n\r\n    // Filter by search term (name, description, category, price)\r\n    if (searchTerm.trim()) {\r\n      const term = searchTerm.toLowerCase();\r\n      const searchNumber = parseFloat(searchTerm);\r\n      \r\n      filtered = filtered.filter(\r\n        (product) =>\r\n          product.name.toLowerCase().includes(term) ||\r\n          product.description?.toLowerCase().includes(term) ||\r\n          product.category_name?.toLowerCase().includes(term) ||\r\n          product.price.toString().includes(term) ||\r\n          (!isNaN(searchNumber) && product.price <= searchNumber) // Show prices up to search number\r\n      );\r\n    }\r\n\r\n    // Filter by multiple categories\r\n    if (selectedCategories.length > 0) {\r\n      filtered = filtered.filter((product) =>\r\n        selectedCategories.includes(product.category_id)\r\n      );\r\n    }\r\n\r\n    // Filter by price range\r\n    filtered = filtered.filter(\r\n      (product) =>\r\n        product.price >= priceRange.min && product.price <= priceRange.max\r\n    );\r\n\r\n    setFilteredProducts(filtered);\r\n  }, [products, searchTerm, selectedCategories, priceRange]);\r\n\r\n  return (\r\n    <section id=\"products\" className=\"w-full\">\r\n      {loading && (\r\n        <div className=\"flex flex-col items-center justify-center py-24\">\r\n          <Loader className=\"h-10 w-10 text-blue-600 animate-spin mb-4\" />\r\n          <p className=\"text-lg text-gray-600\">Loading amazing products...</p>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-8 text-center\">\r\n          <AlertCircle className=\"h-12 w-12 text-red-600 mx-auto mb-4\" />\r\n          <p className=\"text-lg text-red-800 font-semibold\">{error}</p>\r\n          <p className=\"text-sm text-red-600 mt-2\">Please try refreshing the page</p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && filteredProducts.length === 0 && (\r\n        <div className=\"text-center py-24\">\r\n          <p className=\"text-lg text-gray-600 font-medium\">No products found</p>\r\n          <p className=\"text-sm text-gray-500 mt-2\">\r\n            {searchTerm || selectedCategories.length > 0 || priceRange.max !== Infinity\r\n              ? \"Try adjusting your filters\"\r\n              : \"Check back soon for new items\"}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && filteredProducts.length > 0 && (\r\n        <div>\r\n          <p className=\"text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6 font-medium\">\r\n            Showing {filteredProducts.length} product{filteredProducts.length !== 1 ? \"s\" : \"\"}\r\n          </p>\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6\">\r\n            {filteredProducts.map((product) => (\r\n              <ProductCard key={product.id} product={product} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}