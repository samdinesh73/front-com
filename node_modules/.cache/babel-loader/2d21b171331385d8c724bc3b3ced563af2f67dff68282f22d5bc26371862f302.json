{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{categoryService}from\"../services/api\";import{getBackendImageUrl}from\"../utils/imageHelper\";import ProductCard from\"../components/common/ProductCard\";import{Loader,AlertCircle,ArrowLeft}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CategoryPage(){const{slug}=useParams();const navigate=useNavigate();const[category,setCategory]=useState(null);const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchCategoryProducts();},[slug]);const fetchCategoryProducts=async()=>{try{setLoading(true);setError(null);const res=await categoryService.getBySlug(slug);setCategory(res.data.category);setProducts(res.data.products);}catch(err){console.error(\"Error fetching category:\",err);setError(\"Category not found or failed to load\");}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader,{className:\"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Loading category...\"})]})});}if(error||!category){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 sm:p-12 text-center border border-gray-200\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-12 w-12 text-red-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-red-600 mb-4 font-semibold\",children:error||\"Category not found\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/shop\"),className:\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5\"}),\"Back to Shop\"]})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-4 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5\"}),\"Back\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2\",children:category.name}),category.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm sm:text-base\",children:category.description})]}),category.image&&/*#__PURE__*/_jsx(\"img\",{src:getBackendImageUrl(category.image),alt:category.name,className:\"w-24 h-24 sm:w-32 sm:h-32 rounded-lg object-cover\",onError:e=>{e.target.style.display=\"none\";}})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\",children:products.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-8 sm:p-12 text-center border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600 mb-6\",children:\"No products found in this category\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/shop\"),className:\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:\"Continue Shopping\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6 text-sm sm:text-base\",children:[\"Showing \",products.length,\" product\",products.length!==1?\"s\":\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6\",children:products.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,onProductClick:()=>{window.scrollTo(0,0);}},product.id))})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","categoryService","getBackendImageUrl","ProductCard","Loader","AlertCircle","ArrowLeft","jsx","_jsx","jsxs","_jsxs","CategoryPage","slug","navigate","category","setCategory","products","setProducts","loading","setLoading","error","setError","fetchCategoryProducts","res","getBySlug","data","err","console","className","children","onClick","name","description","image","src","alt","onError","e","target","style","display","length","map","product","onProductClick","window","scrollTo","id"],"sources":["C:/Users/SR/OneDrive/Desktop/frontend/src/pages/CategoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { categoryService } from \"../services/api\";\r\nimport { getBackendImageUrl } from \"../utils/imageHelper\";\r\nimport ProductCard from \"../components/common/ProductCard\";\r\nimport { Loader, AlertCircle, ArrowLeft } from \"lucide-react\";\r\n\r\nexport default function CategoryPage() {\r\n  const { slug } = useParams();\r\n  const navigate = useNavigate();\r\n  const [category, setCategory] = useState(null);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchCategoryProducts();\r\n  }, [slug]);\r\n\r\n  const fetchCategoryProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const res = await categoryService.getBySlug(slug);\r\n      setCategory(res.data.category);\r\n      setProducts(res.data.products);\r\n    } catch (err) {\r\n      console.error(\"Error fetching category:\", err);\r\n      setError(\"Category not found or failed to load\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <Loader className=\"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-lg text-gray-600\">Loading category...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !category) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n          <div className=\"bg-white rounded-lg p-8 sm:p-12 text-center border border-gray-200\">\r\n            <AlertCircle className=\"h-12 w-12 text-red-600 mx-auto mb-4\" />\r\n            <p className=\"text-lg text-red-600 mb-4 font-semibold\">{error || \"Category not found\"}</p>\r\n            <button\r\n              onClick={() => navigate(\"/shop\")}\r\n              className=\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n              Back to Shop\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b border-gray-200\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-4 transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n            Back\r\n          </button>\r\n\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n            <div>\r\n              <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2\">\r\n                {category.name}\r\n              </h1>\r\n              {category.description && (\r\n                <p className=\"text-gray-600 text-sm sm:text-base\">\r\n                  {category.description}\r\n                </p>\r\n              )}\r\n            </div>\r\n            {category.image && (\r\n              <img\r\n                src={getBackendImageUrl(category.image)}\r\n                alt={category.name}\r\n                className=\"w-24 h-24 sm:w-32 sm:h-32 rounded-lg object-cover\"\r\n                onError={(e) => {\r\n                  e.target.style.display = \"none\";\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Products */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\">\r\n        {products.length === 0 ? (\r\n          <div className=\"bg-white rounded-lg p-8 sm:p-12 text-center border border-gray-200\">\r\n            <p className=\"text-lg text-gray-600 mb-6\">\r\n              No products found in this category\r\n            </p>\r\n            <button\r\n              onClick={() => navigate(\"/shop\")}\r\n              className=\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              Continue Shopping\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <p className=\"text-gray-600 mb-6 text-sm sm:text-base\">\r\n              Showing {products.length} product{products.length !== 1 ? \"s\" : \"\"}\r\n            </p>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6\">\r\n              {products.map((product) => (\r\n                <ProductCard\r\n                  key={product.id}\r\n                  product={product}\r\n                  onProductClick={() => {\r\n                    window.scrollTo(0, 0);\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}